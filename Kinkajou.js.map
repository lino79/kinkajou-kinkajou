{"version":3,"sources":["Kinkajou.es6"],"names":["UUID","Date","getTime","COMPONENT_ATTR","ATTR_OBSERVER_ATTR","EVENT_ATTR_PREFIX","ClassInstance_hasMethod","instance","methodName","$","isString","getAsFunction","constructor","prototype","hasOwnProperty","_dedupArray","array","result","isArray","i","length","item","x","subItem","push","_createHTMLElement","ns","tag","attrs","element","document","createElementNS","createElement","name","value","handled","isPrimitive","setAttributeNS","setAttribute","indexOf","isFunction","eventType","substr","addEventListener","Error","VirtualNode","type","children","Object","defineProperty","enumerable","toObject","assertIsString","component","Component","create","ref","refresh","vchild","node","createTextNode","render","isInstanceOf","Node","appendChild","Component_handleAttachment","vnode","assertIsInstanceOf","Component_createProperties","props","Component_createProperty","get","set","oldValue","beforePropChange","onPropChange","Component_observeDetach","callback","observer","MutationObserver","mutations","forEach","m","removedNodes","removedNode","attrObserver","disconnect","observe","parentNode","childList","Component_observeAttrChange","attributeName","getAttribute","attributes","attributeOldValue","from","onAttach","bind","onDomDetach","onDomAttrChange","getAsString","getClassName","getAsArray","concat","split","filter","c","Boolean","join","is","Element","rendered","initProps","toArray","p","status","path","def","getAsObject","getAsBoolean","min","max","getAsFloat","getAsInteger","getAsInstanceOf","key","currentValue","nextValue","attrName","attrValue","parent","oldElement","attached","assert","SVGElement","namespaceURI","replaceChild","event","Event","dispatchEvent","undefined","assertIsFunction","assertIsObject","apply","clear","root","compNodes","querySelectorAll","compNode","onDetach","innerHTML","child","shouldClear","Kinkajou","CREF","window","__DEV__"],"mappings":"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","sourcesContent":["import { Tools as $ } from '@kinkajou/tools/Tools';\n\nconst UUID = '' + (new Date()).getTime();\n\nconst COMPONENT_ATTR = '_c' + UUID;\n\nconst ATTR_OBSERVER_ATTR = '_attrObs' + UUID;\n\nconst EVENT_ATTR_PREFIX = 'on';\n\nfunction ClassInstance_hasMethod(instance, methodName) {\n\treturn $.isString(methodName)\n\t\t&& !!$.getAsFunction('constructor.prototype.hasOwnProperty', instance)\n\t\t&& instance.constructor.prototype.hasOwnProperty(methodName);\n}\n\nfunction _dedupArray(array) {\n\tconst result = [];\n\tif ($.isArray(array)) {\n\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\tconst item = array[i];\n\t\t\tif (item == null) {\n\t\t\t\tcontinue;\n\t\t\t} else if ($.isArray(item)) {\n\t\t\t\tfor (let x = 0; x < item.length; x++) {\n\t\t\t\t\tconst subItem = item[x];\n\t\t\t\t\tresult.push(subItem);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction _createHTMLElement(ns, tag, attrs) {\n\t\n\tlet element;\n\tif ($.isString(ns)) {\n\t\telement = document.createElementNS(ns, tag);\n\t} else {\n\t\telement = document.createElement(tag);\n\t}\n\t\n\tif (attrs) {\n\t\tfor (const name in attrs) {\n\t\t\tif (attrs.hasOwnProperty(name)) {\n\t\t\t\tconst value = attrs[name];\n\t\t\t\tif (value == null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet handled = false;\n\t\t\t\tif ($.isPrimitive(value)) {\n\t\t\t\t\tif (!value && (name == 'id' || name == 'style' || name == 'class')) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif ($.isString(ns)) {\n\t\t\t\t\t\telement.setAttributeNS(null, name, '' + value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.setAttribute(name, '' + value);\n\t\t\t\t\t}\n\t\t\t\t\thandled = true;\n\t\t\t\t} else if (name.indexOf(EVENT_ATTR_PREFIX) == 0 && name.length > EVENT_ATTR_PREFIX.length && $.isFunction(value)) {\n\t\t\t\t\tconst eventType = name.substr(EVENT_ATTR_PREFIX.length);\n\t\t\t\t\telement.addEventListener(eventType, value, false);\n\t\t\t\t\thandled = true;\n\t\t\t\t} else if (name == 'ref' && $.isFunction(value)) {\n\t\t\t\t\tvalue(element);\n\t\t\t\t\thandled = true;\n\t\t\t\t}\n\t\t\t\tif (!handled) {\n\t\t\t\t\tthrow new Error('illegal attribute: ' + name + '. Element: ' + tag + '.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn element;\n}\n\nclass VirtualNode {\n\n\tconstructor(type, attrs, children) {\n\n\t\tObject.defineProperty(this, 'type', {\n\t\t\tvalue: type,\n\t\t\tenumerable: true,\n\t\t});\n\n\t\tthis.attrs = $.toObject(attrs, {});\n\t\tthis.children = _dedupArray(children);\n\t}\n\n\tstatic render(vnode, ns) {\n\t\t$.assertIsInstanceOf(vnode, VirtualNode, 'vnode', 'VirtualNode');\n\t\treturn vnode.render(ns);\n\t}\n\n\trender(/** @type {String} */ ns) {\n\n\t\tif (ns != null) $.assertIsString(ns, 'ns');\n\n\t\tconst type = this.type;\n\t\tconst attrs = this.attrs;\n\t\tconst children = this.children\n\t\t/** @type {Element} */ let element;\n\t\n\t\tif ($.isFunction(type)) {\n\t\t\t\n\t\t\tconst component = Component.create(type, attrs, children);\n\t\n\t\t\tconst ref = component.getAsFunction('ref');\n\t\t\tif (ref) {\n\t\t\t\tref(component);\n\t\t\t}\n\t\t\t\n\t\t\telement = component.refresh();\n\t\t\treturn element;\n\t\t}\n\t\t\n\t\tif ($.isString(type)) {\n\t\t\telement = _createHTMLElement(ns, type, attrs);\n\t\t} else {\n\t\t\tthrow new Error('Illegal VirtualNode type');\n\t\t}\n\t\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\n\t\t\tconst vchild = children[i];\n\t\t\t/** @type {Node} */ let node;\n\t\t\t\n\t\t\tif ($.isPrimitive(vchild)) {\n\t\t\t\tnode = document.createTextNode('' + vchild);\n\t\t\t} else if (vchild instanceof VirtualNode) {\n\t\t\t\tnode = vchild.render(ns);\n\t\t\t}\n\t\n\t\t\tif (!$.isInstanceOf(node, Node)) {\n\t\t\t\tthrow new Error('illegal child');\n\t\t\t}\n\t\n\t\t\telement.appendChild(node);\n\t\t\t\n\t\t\tComponent_handleAttachment(node);\n\t\t}\n\t\n\t\treturn element;\n\t}\n\t\n}\n\nfunction Component_createProperties(component, attrs) {\n\n\tconst props = {};\n\n\tif (attrs) {\n\t\tfor (const name in attrs) {\n\t\t\tif (attrs.hasOwnProperty(name)) {\n\t\t\t\tComponent_createProperty(component, props, attrs, name);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn props;\n}\n\nfunction Component_createProperty(component, props, attrs, name) {\n\n\tObject.defineProperty(props, name, {\n\t\tenumerable: true,\n\t\tget() {\n\t\t\treturn attrs[name];\n\t\t},\n\t\tset(value) {\n\t\t\tconst oldValue = attrs[name];\n\t\t\tif (component.beforePropChange(name, oldValue, value) !== false) {\n\t\t\t\tattrs[name] = value;\n\t\t\t\tcomponent.onPropChange(name, value, oldValue);\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction Component_observeDetach(callback, node) {\n\n\tconst observer = new MutationObserver((mutations, observer) => {\n\t\tmutations.forEach(m => {\n\t\t\tif (m.type === 'childList') {\n\t\t\t\tfor (let i = 0; i < m.removedNodes.length; i++) {\n\t\t\t\t\tconst removedNode = m.removedNodes[i];\n\t\t\t\t\tif (removedNode === node) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst attrObserver = removedNode[ATTR_OBSERVER_ATTR];\n\t\t\t\t\t\t\t\tif (attrObserver) {\n\t\t\t\t\t\t\t\t\tattrObserver.disconnect();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tobserver.observe(node.parentNode, {\n\t\tchildList: true,\n\t});\n}\n\nfunction Component_observeAttrChange(callback, node) {\n\n\tconst observer = new MutationObserver(mutations => {\n\t\tmutations.forEach(m => {\n\t\t\tif (m.type === 'attributes') {\n\t\t\t\tconst name = m.attributeName;\n\t\t\t\tconst value = node.getAttribute(name);\n\t\t\t\tconst oldValue = m.oldValue;\n\t\t\t\tcallback(name, value, oldValue);\n\t\t\t}\n\t\t});\n\t});\n\n\tobserver.observe(node, {\n\t\tattributes: true,\n\t\tattributeOldValue: true,\n\t});\n\n\tnode[ATTR_OBSERVER_ATTR] = observer;\n}\n\nfunction Component_handleAttachment(node) {\n\n\t$.assertIsInstanceOf(node, Node, 'node', 'Node');\n\n\tconst component = Component.from(node);\n\tif (component) {\n\t\t\n\t\tconst onAttach = component.onAttach.bind(component);\n\t\tonAttach();\n\n\t\tif (node.parentNode && ClassInstance_hasMethod(component, 'onDomDetach')) {\n\t\t\tconst callback = component.onDomDetach.bind(component);\n\t\t\tComponent_observeDetach(callback, node);\n\t\t}\n\n\t\tif (ClassInstance_hasMethod(component, 'onDomAttrChange')) {\n\t\t\tconst callback = component.onDomAttrChange.bind(component);\n\t\t\tComponent_observeAttrChange(callback, node);\n\t\t}\n\t}\n}\n\nclass Component {\n\n\tget is() {\n\t\treturn $.getAsString('constructor.is', this);\n\t}\n\n\tget className() {\n\t\treturn Component.getClassName(this.constructor);\n\t}\n\n\tget id() {\n\t\treturn $.getAsString('props.id', this);\n\t}\n\n\tget styleClass() {\n\t\treturn $.getAsString('props.styleClass', this)\n\t\t\t|| $.getAsArray('styleRoot', this)\n\t\t\t\t.concat($.getAsArray('styleProps', this))\n\t\t\t\t.concat($.getAsString('props.class', this).split(' '))\n\t\t\t\t.filter(c => Boolean(c))\n\t\t\t\t.join(' ');\n\t}\n\n\tget styleRoot() {\n\t\treturn this.is.split('.');\n\t}\n\n\tget styleProps() {\n\t\treturn [];\n\t}\n\n\tget style() {\n\t\treturn $.getAsString('props.style', this);\n\t}\n\n\tget rendered() {\n\t\treturn $.isInstanceOf(this.element, Element);\n\t}\n\n\tget attached() {\n\t\treturn this.rendered && this.element.parentNode != null;\n\t}\n\n\tconstructor(attrs) {\n\n\t\tthis.initProps((attrs = attrs || {}), (attrs, ...props) => {\n\t\t\t$.toArray(props).forEach(p => attrs['' + p] = attrs['' + p]);\n\t\t});\n\n\t\tconst status = {};\n\t\t\n\t\tObject.defineProperty(this, 'props', {\n\t\t\tvalue: Component_createProperties(this, attrs),\n\t\t\tenumerable: true,\n\t\t});\n\n\t\tObject.defineProperty(this, 'children', {\n\t\t\tget() {\n\t\t\t\treturn $.getAsArray('children', status);\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\t$.set('children', value, status);\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t});\n\t\t\n\t\tObject.defineProperty(this, 'element', {\n\t\t\tget() {\n\t\t\t\treturn $.get('element', status);\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\t$.assertIsInstanceOf(value, Element, 'element', 'Element');\n\t\t\t\t$.set('element', value, status);\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t});\n\n\t\tObject.defineProperty(this, '$', {\n\t\t\tvalue: $,\n\t\t\tenumerable: true,\n\t\t});\n\t}\n\n\tstatic getClassName(constructor) {\n\t\tconst is = $.getAsString('is', constructor);\n\t\tif (!$.isString(is)) return undefined;\n\t\tconst array = is.split('.');\n\t\treturn array[array.length - 1];\n\t}\n\n\tstatic create(constructor, attrs, children) {\n\t\t$.assertIsFunction(constructor, 'constructor');\n\t\tif (attrs != null) $.assertIsObject(attrs, 'attrs');\n\t\tconst component = Object.create(constructor.prototype);\n\t\tconstructor.apply(component, [ attrs ]);\n\t\tcomponent.children = children;\n\t\treturn component;\n\t}\n\n\tstatic from(node) {\n\t\tif (node instanceof VirtualNode) {\n\t\t\t$.assert($.isFunction(node.type), 'node must be a Component');\n\t\t\treturn Component.create(node.type, node.attrs, node.children);\n\t\t} else {\n\t\t\t$.assertIsInstanceOf(node, Node, 'node', 'Node');\n\t\t\tconst x = $.get(COMPONENT_ATTR, node);\n\t\t\treturn $.isInstanceOf(x, Component) ? x : null;\n\t\t}\n\t}\n\n\tget(path) {\n\t\treturn $.get(path, this.props);\n\t}\n\n\tset(path, value) {\n\t\t$.set(path, value, this.props);\n\t}\n\n\tgetAsObject(path, def) {\n\t\treturn $.getAsObject(path, this.props, def);\n\t}\n\n\tgetAsArray(path, def) {\n\t\treturn $.getAsArray(path, this.props, def);\n\t}\n\n\tgetAsFunction(path, def) {\n\t\treturn $.getAsFunction(path, this.props, def);\n\t}\n\n\tgetAsBoolean(path, def) {\n\t\treturn $.getAsBoolean(path, this.props, def);\n\t}\n\n\tgetAsString(path, def) {\n\t\treturn $.getAsString(path, this.props, def);\n\t}\n\n\tgetAsFloat(path, def, min, max) {\n\t\treturn $.getAsFloat(path, this.props, def, min, max);\n\t}\n\n\tgetAsInteger(path, def, min, max) {\n\t\treturn $.getAsInteger(path, this.props, def, min, max);\n\t}\n\n\tgetAsInstanceOf(path, type) {\n\t\treturn $.getAsInstanceOf(path, this.props, type);\n\t}\n\n\tinitProps(attrs) {}\n\n\tbeforePropChange(key, currentValue, nextValue) {}\n\n\tonPropChange(key, value, oldValue) {}\n\n\tonAttach() {}\n\n\tonDetach() {}\n\n\tonDomAttrChange(attrName, attrValue, oldValue) {}\n\n\tonDomDetach() {}\n\n\trender() {\n\t\tthrow new Error('Kinkajou.Component.render() must be implemented!');\n\t}\n\n\trefresh() {\n\n\t\t/** @type {Node} */ let parent;\n\t\t/** @type {Element} */ let oldElement;\n\t\tif (this.attached) {\n\t\t\toldElement = this.element;\n\t\t\tparent = oldElement.parentNode;\n\t\t}\n\t\t\n\t\tlet element = this.render();\n\t\t$.assert(\n\t\t\telement instanceof Element || element instanceof SVGElement || element instanceof VirtualNode,\n\t\t\t'Illegal Kinkajou.Component.render() return. Please, return an Element, an SVGElement or use JSX syntax.'\n\t\t);\n\n\t\tif (element instanceof VirtualNode) {\n\t\t\telement = VirtualNode.render(element, parent ? parent.namespaceURI : null);\n\t\t}\n\n\t\telement.setAttribute('data-kj-comp', '');\n\t\t\n\t\tthis.element = element;\n\t\telement[COMPONENT_ATTR] = this;\n\n\t\tif (parent && oldElement) {\n\t\t\tparent.replaceChild(element, oldElement);\n\t\t}\n\t\t\n\t\treturn element;\n\t}\n\n\tdispatchEvent(event) {\n\t\t$.assertIsInstanceOf(event, Event, 'event', 'Event');\n\t\tif (!this.rendered) {\n\t\t\tthrow new Error('Kinkajou.Component is not rendered!');\n\t\t}\n\t\tthis.element.dispatchEvent(event);\n\t}\n\n\tcheckAttached() {\n\t\tif (!this.attached) {\n\t\t\tthrow new Error(`${this.is || 'Component'} is not attached`);\n\t\t}\n\t}\n\n\tcheckRendered() {\n\t\tif (!this.rendered) {\n\t\t\tthrow new Error(`${this.is || 'Component'} is not rendered`);\n\t\t}\n\t}\n\n\tclone() {\n\t\treturn Component.create(this.constructor.prototype, this.props);\n\t}\n\n}\n\nfunction createElement(tag, attrs, ...children) {\n\treturn new VirtualNode(tag, attrs, children);\n}\n\nfunction clear(root) {\n\t\n\t$.assertIsInstanceOf(root, Element, 'root', 'Element');\n\n\tconst compNodes = root.querySelectorAll('[data-kj-comp]');\n\tfor (let i = 0; i < compNodes.length; i++) {\n\t\tconst compNode = compNodes[i];\n\t\tconst component = Component.from(compNode);\n\t\tif (component) {\n\t\t\tcomponent.onDetach();\n\t\t}\n\t}\n\n\troot.innerHTML = '';\n}\n\nfunction render(child, root, shouldClear) {\n\t\n\t$.assert(child instanceof Node || child instanceof VirtualNode, 'Illegal child argument. It should be a Node or a JSX element.');\n\t$.assertIsInstanceOf(root, Element, 'root', 'Element');\n\n\tlet node;\n\tif (node instanceof Node) {\n\t\tnode = child;\n\t} else {\n\t\tnode = VirtualNode.render(child, root.namespaceURI);\n\t}\n\t\n\tif (shouldClear !== false) clear(root);\n\troot.appendChild(node);\n\t\n\tComponent_handleAttachment(node);\n}\n\nexport const Kinkajou = {\n\tCREF: COMPONENT_ATTR,\n\t$,\n\tVirtualNode,\n\tComponent,\n\tclear,\n\tcreateElement,\n\trender,\n};\n\nif (window.__DEV__ === true) {\n\twindow.Kinkajou = Kinkajou;\n}"],"file":"Kinkajou.js"}